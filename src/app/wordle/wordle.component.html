<div class="wordle">
  <div class="wordle-title">Wordle</div>

  <div class="wordle-cells" *ngIf="wordLength$ | async as wordLength">
    <div
      class="wordle-row"
      *ngFor="let row of attemptsCount | arrayFromNumber; let rowIndex = index"
    >
      <div
        *ngFor="
          let letter of wordLength | arrayFromNumber;
          let letterIndex = index
        "
        class="wordle-cell"
        [class.cursor]="rowIndex | wordleCursorInCell: letterIndex"
        [class.flipped]="rowIndex | wordleRowCanFlip"
      >
        <div
          class="wordle-cell-content"
          [class.filled]="rowIndex | wordleCellIsFilled: letterIndex"
          [style.animation-delay]="
            (rowIndex | wordleRowCanFlip) ? 200 * letterIndex + 'ms' : '0ms'
          "
        >
          <div class="wordle-cell-front">
            {{ (rowIndex | wordleExtractWord)?.[letterIndex]?.letter }}
          </div>

          <div
            class="wordle-cell-back"
            [class.valid]="
              letterIndex % 2 === 0 && letterIndex !== wordLength - 1
            "
            [class.invalid]="letterIndex % 2 !== 0"
            [class.error]="letterIndex === wordLength - 1"
          >
            {{ (rowIndex | wordleExtractWord)?.[letterIndex]?.letter }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="wordle-keyboard">
    <div class="wordle-row" *ngFor="let row of WORDLE_KEYBOARD">
      <div
        *ngFor="let key of row"
        (click)="handleKey(key)"
        class="wordle-key"
        [class.wide]="key === 'Backspace' || key === 'Enter'"
      >
        {{ key === "Backspace" ? "âŒ«" : key }}
      </div>
    </div>
  </div>
</div>
